---
production_url: http://www.sundaysenergy.com
base_path: /
uid: 1

# Data
collection:

  gh_init:
    provider: github
    resource: repo/branch
    args:
      user: sundaysenergy
      repo: www.sundaysenergy.com
      branch: master
    view:
      branch_info:
        data_field: commit
        response_field:
          sha:
            fkey: sha
            type: string

  gh_raw:
    provider: github
    resource: repo/raw
    args:
      user: sundaysenergy
      repo: www.sundaysenergy.com
      file: '{{{/id}}}'

  gh:
    provider:
      name: github
      id: path
      resource: repo/tree
      preload: gh_init/branch_info
      args:
        user: sundaysenergy
        repo: www.sundaysenergy.com
        sha: '{{gh_init.branch_info.sha}}'
    view:
      data:
        id: /data.yml
        type: yaml

      theme:
        type: theme
        args:
          file: /theme

      drupal_hosting:
        type: json
        args:
          file: /catalog/hosting/drupal
        entity:
          type: md
          field: _source # Field to save the loaded and parsed entity to.
          args:
            file: '/{{{path}}}'

      services:
        type: json
        args:
          file: /services
        entity:
          type: md
          args:
            file: '{{{id}}}'

# Displays
render:
  default: # Machine Name
    preload: # View dependencies
      -
        collection: gh
        view: drupal_hosting

    layout: hosting # view layout to use
    uri: catalog/hosting/drupal.html # uri for rendered output. filename.
    type: html # The file type of the render we are creating.
