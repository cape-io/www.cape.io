---
domain: www.integral-therapy.com
base_path: /
uid: 1

collection:
  content:
    provider: github
    index: sundaysenergy/content.integral-therapy.com
    id_prop: path

    arg_default:
      repo: content.integral-therapy.com
      owner: sundaysenergy
      branch: master

    arg_required:
      path: string

    convert:
      yml: yaml
      yaml: yaml
      md: md
      markdown: md

    load:
      all:
        resource: tree
        arg:
          recursive: true
          sha: b452d883b98c4558d62baeb8d6f7933ba5c481ef

      entity:
        provider: github
        resource: raw
        args:
          owner: sundaysenergy
          repo: content.integral-therapy.com
          branch: master

view:
  data:
    content:
      filter:
        load:
          self: entity
        must:
          path: data.yml

  staff:
    content:
      render:
        load:
          self: entity
      filter:
        must:
          path:
            dirname: staff
            ext: .md

  layout:
    content:
      filter:
        must:
          type: blob
          path:
            dirname: theme/layouts
            ext: .html

# Displays
convert:
  # We want to load up the data and the templates and compile them.
  - # anytime views below are updated, this is triggered.
    convert: mustache
    source: [data, staff]
    # The source will be passed to each template in the order below.
    template: [layout/staff.html, layout/default.html]
    # The result of each is added as a source property before passing to the next.
    result: content
    # The final result is going to have a uri. #uri supports mustache variables.
    uri: /credentials/index.html # uri for rendered output. filename.
    type: html # The file type of the render we are creating.
    destintion: cloudfiles
  -
    source: [data]
    uri: data.json
